{% extends 'base.html' %}

{% block header %}
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <h1>{% block title %} "{{ post.val()['title'] }}"{% endblock %}</h1> 
    <div class="shadow-sm card" style="width: 100%; margin-top: 10px">
        <div class="card-body">
            
            <span class="btn-group">
                <a class="btn btn-primary" href="{{ url_for('marketplace.bid', id=post.key()) }}">Accept</a>
                <a class="btn btn-dark" href="{{ url_for('marketplace.bid', id=post.key()) }}">Message</a>
            </span>
        </div>
    </div>
{% endblock %}

{% block secLeft %}
<div class="shadow-sm card" style="width: 100%; margin-top: 10px">
    <div class="card-body">
      <div class="card-title" style="width: 100%">
        <div class="float-left"><h5>{{ post.val()['title'] }}</h5></div>
      </div>
      <a href="/user/{{post.val()['author']}}">@{{post.val()['author']}}</a>
      <br>
      <div class="card-title">
        <div class="float-left"><i class="fas fa-dollar-sign"> {{post.val()["budget"]}} - {{post.val()["payment"]}}</i></div>
      </div>
      <br>
      <hr>
      <p class="card-text">{{ post.val()['body'] }}.</p>
    </div>
    <ul class="list-group list-group-flush">
      <hr>
      <li class="list-group-item"><script>document.write(getCountdown("{{ post.val()['deadline'] }}"))</script> <br> until deadline</li>
    </ul>
</div>
{% endblock %}

{% block secContent %}
{% for bid in bids %}
    <div class="shadow-sm card" style="width: 100%; margin-top: 10px">
        <div class="card-body">
            <div class="card-title" style="width: 100%">
                <div class="float-left"><h5>{{bid.val()['author']}}</h5></div>
                <div class="float-right"><i class="fas fa-dollar-sign"> {{bid.val()["price"]}}</i></div>
            </div>
            <br>
            {{ utcFromTimestamp(bid.val()['timestamp']).strftime('%Y-%m-%d')  }} at {{ utcFromTimestamp(bid.val()['timestamp']).strftime('%H:%M') }}
            <hr>
            <p class="card-text">{{ bid.val()['body'] }}</p>
        </div>
        <div class="card-body">
            <span class="btn-group">
            <a class="btn btn-primary" href="{{ url_for('marketplace.bid', id=post.key()) }}">Accept</a>
            <a class="btn btn-dark" href="{{ url_for('marketplace.bid', id=post.key()) }}">Message</a>
            </span>
        </div>
    </div>
    
{% endfor %}
{% endblock %}